#include <dlfcn.h>
#include <stdio.h>


int main(int argc, char **argv)
{
	void *indigoHandle;
	void *indigoInChIHandle;
	void *indigoRendererHandle;
	char *indigoVersion;
	indigoHandle = dlopen(argv[1], RTLD_GLOBAL | RTLD_NOW);	
	if (!indigoHandle)
	{
               fputs(dlerror(), stderr);
               return 1;
	}	
	indigoInChIHandle = dlopen(argv[2], RTLD_GLOBAL | RTLD_NOW);
        if (!indigoInChIHandle)
        {
               fputs(dlerror(), stderr);
               return 1;
        }	
	indigoRendererHandle = dlopen(argv[3], RTLD_GLOBAL | RTLD_NOW);     
        if (!indigoRendererHandle)
	{
		fputs(dlerror(), stderr);
		return 1; 
	}
	indigoVersion = dlsym(indigoHandle, "indigoVersion");
        printf("%s", indigoVersion);		
	dlclose(indigoRendererHandle);
	dlclose(indigoInChIHandle);
	dlclose(indigoHandle);
	return 0;
}
